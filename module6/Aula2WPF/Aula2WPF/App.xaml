<Application x:Class="WpfXamlPerformanceDemo.App"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             StartupUri="MainWindow.xaml"
             Startup="Application_Startup">

    <Application.Resources>
        <!-- TEMPLATES COMPLEXOS QUE CAUSAM OVERHEAD -->
        <ControlTemplate x:Key="ComplexButtonTemplate" TargetType="Button">
            <Grid>
                <!-- Múltiplas camadas desnecessárias -->
                <Border Background="LightGray" CornerRadius="10" Margin="2"/>
                <Border  CornerRadius="8" Margin="4">
                    <Border.Background>
                        <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                            <GradientStop Color="#FFAAAAAA" Offset="0"/>
                            <GradientStop Color="#FF666666" Offset="0.5"/>
                            <GradientStop Color="#FF333333" Offset="1"/>
                        </LinearGradientBrush>
                    </Border.Background>

                    <Border.Effect>
                        <DropShadowEffect ShadowDepth="3" BlurRadius="10"/>
                    </Border.Effect>

                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>

                        <!-- Ícone desnecessário -->
                        <Ellipse Grid.Column="0" Width="20" Height="20" Margin="5">
                            <Ellipse.Fill>
                                <RadialGradientBrush>
                                    <GradientStop Color="White" Offset="0"/>
                                    <GradientStop Color="LightBlue" Offset="1"/>
                                </RadialGradientBrush>
                            </Ellipse.Fill>
                        </Ellipse>

                        <!-- Conteúdo -->
                        <ContentPresenter Grid.Column="1" 
                                          HorizontalAlignment="Center" 
                                          VerticalAlignment="Center"/>

                        <!-- Seta decorativa -->
                        <Path Grid.Column="2" 
                              Data="M 0,0 L 5,5 L 0,10 Z" 
                              Fill="White" 
                              Margin="5,0"
                              Stretch="Uniform"/>
                    </Grid>
                </Border>

                <!-- Glow effect overlay -->
                <Border Background="#20FFFFFF" CornerRadius="8" Margin="4">
                    <Border.OpacityMask>
                        <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                            <GradientStop Color="#FFFFFFFF" Offset="0"/>
                            <GradientStop Color="#00FFFFFF" Offset="1"/>
                        </LinearGradientBrush>
                    </Border.OpacityMask>
                </Border>
            </Grid>

            <ControlTemplate.Triggers>
                <!-- Triggers complexos que causam redraw -->
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background">
                        <Setter.Value>
                            <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                                <GradientStop Color="#FFCCCCCC" Offset="0"/>
                                <GradientStop Color="#FF888888" Offset="0.5"/>
                                <GradientStop Color="#FF555555" Offset="1"/>
                            </LinearGradientBrush>
                        </Setter.Value>
                    </Setter>
                </Trigger>

                <Trigger Property="IsPressed" Value="True">
                    <Setter Property="RenderTransform">
                        <Setter.Value>
                            <ScaleTransform ScaleX="0.95" ScaleY="0.95"/>
                        </Setter.Value>
                    </Setter>
                </Trigger>
            </ControlTemplate.Triggers>
        </ControlTemplate>

        <!-- DataTemplate complexo para ListView -->
        <DataTemplate x:Key="HeavyItemTemplate">
            <Border Background="White" CornerRadius="5" Margin="2" Padding="5">
                <Border.Effect>
                    <DropShadowEffect BlurRadius="5" ShadowDepth="2"/>
                </Border.Effect>

                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <!-- Imagem com efeitos -->
                    <Border Grid.Column="0" 
                            Width="50" 
                            Height="50" 
                            CornerRadius="25" 
                            Margin="5">
                        <Border.Background>
                            <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                <GradientStop Color="#FF3498db" Offset="0"/>
                                <GradientStop Color="#FF2ecc71" Offset="1"/>
                            </LinearGradientBrush>
                        </Border.Background>

                        <TextBlock Text="{Binding Initials}" 
                                   HorizontalAlignment="Center" 
                                   VerticalAlignment="Center"
                                   Foreground="White"
                                   FontSize="18"
                                   FontWeight="Bold"/>
                    </Border>

                    <!-- Conteúdo principal -->
                    <StackPanel Grid.Column="1" Margin="10,0">
                        <TextBlock Text="{Binding Name}" 
                                   FontSize="14" 
                                   FontWeight="Bold"/>
                        <TextBlock Text="{Binding Description}" 
                                   TextWrapping="Wrap"
                                   Foreground="#666"/>
                        <StackPanel Orientation="Horizontal" Margin="0,5,0,0">
                            <Ellipse Width="10" Height="10" Fill="Green" Margin="0,0,5,0"/>
                            <TextBlock Text="{Binding Status}" FontSize="10"/>
                        </StackPanel>
                    </StackPanel>

                    <!-- Botões de ação -->
                    <StackPanel Grid.Column="2" Orientation="Horizontal">
                        <Button Content="✓" 
                                Width="25" 
                                Height="25" 
                                Margin="2"
                                Template="{StaticResource ComplexButtonTemplate}"/>
                        <Button Content="✗" 
                                Width="25" 
                                Height="25" 
                                Margin="2"
                                Template="{StaticResource ComplexButtonTemplate}"/>
                        <Button Content="..." 
                                Width="25" 
                                Height="25" 
                                Margin="2"
                                Template="{StaticResource ComplexButtonTemplate}"/>
                    </StackPanel>
                </Grid>
            </Border>
        </DataTemplate>

        <!-- Estilo problemático para TextBox -->
        <Style x:Key="HeavyTextBoxStyle" TargetType="TextBox">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="TextBox">
                        <Grid>
                            <!-- Background com gradiente -->
                            <Border CornerRadius="3" BorderBrush="#CCCCCC" BorderThickness="1">
                                <Border.Background>
                                    <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                                        <GradientStop Color="White" Offset="0"/>
                                        <GradientStop Color="#EEEEEE" Offset="1"/>
                                    </LinearGradientBrush>
                                </Border.Background>

                                <!-- ScrollViewer interno -->
                                <ScrollViewer x:Name="PART_ContentHost" 
                                              Margin="5"
                                              VerticalScrollBarVisibility="Auto"/>
                            </Border>

                            <!-- Watermark -->
                            <TextBlock x:Name="Watermark" 
                                       Text="Enter text..." 
                                       Foreground="#999999"
                                       Margin="8,4"
                                       IsHitTestVisible="False"
                                       Visibility="Collapsed"/>
                        </Grid>

                        <ControlTemplate.Triggers>
                            <Trigger Property="Text" Value="">
                                <Setter TargetName="Watermark" Property="Visibility" Value="Visible"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

    </Application.Resources>
</Application>